<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${player != null && player.fmPlayerDetailsDto != null ? player.fmPlayerDetailsDto.name + ' - Player Profile | FMRS' : 'Player Profile | FMRS'}">Player Profile | FMRS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.min.css" rel="stylesheet">
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .stat-bar {
            height: 3px;
            background-color: #e2e8f0;
            border-radius: 1px;
            overflow: hidden;
        }
        .stat-bar-fill-gray { background-color: #94a3b8; }
        .stat-bar-fill-yellow { background-color: #fbbf24; }
        .stat-bar-fill-orange { background-color: #f97316; }
        .stat-bar-fill-emerald { background-color: #10b981; }
        .stat-item:hover { background-color: #f1f5f9; }

        /* Position map styles */
        .position-map {
            width: 100%;
            aspect-ratio: 3/2;
            background-color: #000000;
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .field-line {
            position: absolute;
            background-color: #222222;
        }

        .position-indicator {
            position: absolute;
            width: 16px;
            height: 16px;
            left: 10px;
        }

        .position-gray { background-color: #6B7280; }
        .position-yellow { background-color: #FBBF24; }
        .position-green { background-color: #34D399; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex flex-col text-xs">
<!-- Header -->
<header class="bg-white shadow-sm">
    <nav class="w-full max-w-7xl mx-auto px-2 py-2 flex justify-between items-center">
        <a href="/home" class="text-lg font-bold text-slate-800 flex items-center gap-1">
            <i class="icon icon-soccer-ball text-emerald-600"></i>
            FMRS
        </a>
        <div class="space-x-3">
            <a href="/search/simple-players" class="text-slate-600 hover:text-emerald-600 transition duration-300">Search</a>
            <a href="/team" class="text-slate-600 hover:text-emerald-600 transition duration-300">Teams</a>
            <a href="/leagues" class="text-slate-600 hover:text-emerald-600 transition duration-300">Leagues</a>
        </div>
    </nav>
</header>

<!-- Hero Section -->
<section class="hero-gradient text-white py-4">
    <div class="w-full max-w-7xl mx-auto px-2">
        <h1 class="text-2xl font-bold mb-0.5" th:text="${player != null && player.fmPlayerDetailsDto != null ? player.fmPlayerDetailsDto.name : 'Player Name'}">Player Name</h1>
        <p class="text-base text-slate-300" th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.teamName : 'Team'}">Team</p>
    </div>
</section>

<!-- Main Content -->
<main class="flex-grow w-full max-w-7xl mx-auto px-2 py-4">
    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
        <div class="p-3">
            <!-- Player Header -->
            <div class="flex flex-col sm:flex-row items-start gap-3 mb-4">
                <div class="relative group">
                    <div class="w-24 h-24 rounded-lg overflow-hidden bg-slate-200 border border-slate-400 shadow-sm transition-transform duration-300 transform group-hover:scale-105">
                        <img th:src="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.imageUrl : ''}"
                             th:alt="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.name : 'Player'}"
                             class="w-full h-full object-cover">
                    </div>
                </div>

                <div class="flex-grow">
                    <div class="sm:flex justify-between items-start mb-2">
                        <div>
                            <h2 class="text-xl font-bold mb-0.5 text-slate-800"
                                th:text="${player != null && player.fmPlayerDetailsDto != null ? player.fmPlayerDetailsDto.name : 'Player Name'}">Player Name</h2>

                            <!-- Best Position Display -->
                            <p class="text-base text-slate-600" th:if="${player != null && player.fmPlayerDetailsDto != null}">
                              <span th:with="pos=${player.fmPlayerDetailsDto.position}" th:remove="tag">
                                  <span th:if="${pos != null && pos.goalkeeper >= 15}">Goalkeeper</span>
                                  <span th:if="${pos != null && pos.defenderCentral >= 15}">Center Back</span>
                                  <span th:if="${pos != null && pos.defenderLeft >= 15}">Left Back</span>
                                  <span th:if="${pos != null && pos.defenderRight >= 15}">Right Back</span>
                                  <span th:if="${pos != null && pos.wingBackLeft >= 15}">Left Wing Back</span>
                                  <span th:if="${pos != null && pos.wingBackRight >= 15}">Right Wing Back</span>
                                  <span th:if="${pos != null && pos.defensiveMidfielder >= 15}">Defensive Midfielder</span>
                                  <span th:if="${pos != null && pos.midfielderCentral >= 15}">Central Midfielder</span>
                                  <span th:if="${pos != null && pos.midfielderLeft >= 15}">Left Midfielder</span>
                                  <span th:if="${pos != null && pos.midfielderRight >= 15}">Right Midfielder</span>
                                  <span th:if="${pos != null && pos.attackingMidCentral >= 15}">Attacking Midfielder</span>
                                  <span th:if="${pos != null && pos.attackingMidLeft >= 15}">Left Winger</span>
                                  <span th:if="${pos != null && pos.attackingMidRight >= 15}">Right Winger</span>
                                  <span th:if="${pos != null && pos.striker >= 15}">Striker</span>
                              </span>
                            </p>
                        </div>
                        <div class="mt-1 sm:mt-0">
                            <div class="px-2 py-1 bg-emerald-100 rounded-lg text-center">
                                <div class="text-xs text-slate-600">Current Ability</div>
                                <div class="text-sm font-bold text-emerald-600">
                                    <span th:text="${player != null && player.fmPlayerDetailsDto != null ? player.fmPlayerDetailsDto.currentAbility : '0'}">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs">
                        <div class="space-y-0.5">
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-calendar-days text-emerald-500"></i>
                                <span>Age: <span th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.age : '0'}">30</span>
                                 (DOB: <span th:text="${player != null && player.playerDetailsDto != null && player.playerDetailsDto.birth != null ?
                                              #temporals.format(player.playerDetailsDto.birth, 'MMM d, yyyy') : 'Unknown'}">Jan 1, 1990</span>)
                             </span>
                            </div>
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-ruler text-emerald-500"></i>
                                <span>Height: <span th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.height + ' cm' : '0 cm'}">180 cm</span></span>
                            </div>
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-weight text-emerald-500"></i>
                                <span>Weight: <span th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.weight + ' kg' : '0 kg'}">75 kg</span></span>
                            </div>
                        </div>
                        <div class="space-y-0.5">
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-users text-emerald-500"></i>
                                <span>Team: <span th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.teamName : 'Unknown'}">Team Name</span></span>
                            </div>
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-flag text-emerald-500"></i>
                                <span>Nationality: <span th:text="${player != null && player.playerDetailsDto != null ? player.playerDetailsDto.nationName : 'Unknown'}">Nation</span></span>
                            </div>
                            <div class="flex items-center gap-1 text-slate-700">
                                <i class="icon icon-star text-emerald-500"></i>
                                <span>Potential: <span th:text="${player != null && player.fmPlayerDetailsDto != null ? player.fmPlayerDetailsDto.potentialAbility : '0'}">0</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Season Statistics -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                <!-- Season Statistics -->
                <div class="bg-slate-50 rounded-xl p-2">
                    <h3 class="font-semibold mb-1 flex items-center gap-1 text-sm text-slate-800">
                        <i class="icon icon-activity text-emerald-500"></i>
                        Season Statistics
                    </h3>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-play-circle text-emerald-500"></i>
                                <span class="text-xs text-slate-600">Games</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:with="games=${player != null && player.playerStatDto != null && player.playerStatDto.gamesPlayed != null ? player.playerStatDto.gamesPlayed : '0'},
                         subs=${player != null && player.playerStatDto != null && player.playerStatDto.substitutes != null ? player.playerStatDto.substitutes : '0'}"
                                  th:text="${games + '(' + subs + ')'}">0(0)</span>
                        </div>
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-ball-football text-emerald-500"></i>
                                <span class="text-xs text-slate-600">Goals</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:with="goals=${player != null && player.playerStatDto != null && player.playerStatDto.goal != null ? player.playerStatDto.goal : '0'},
                         pk=${player != null && player.playerStatDto != null && player.playerStatDto.pk != null ? player.playerStatDto.pk : '0'}"
                                  th:text="${goals + '(' + pk + ')'}">0(0)</span>
                        </div>
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-footprints text-emerald-500"></i>
                                <span class="text-xs text-slate-600">Assists</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:text="${player != null && player.playerStatDto != null && player.playerStatDto.assist != null ? player.playerStatDto.assist : '0'}">0</span>
                        </div>
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-star text-emerald-500"></i>
                                <span class="text-xs text-slate-600">Rating</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:text="${player != null && player.playerStatDto != null && player.playerStatDto.rating != null ? player.playerStatDto.rating : '0.0'}">0.0</span>
                        </div>
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-square text-yellow-500"></i>
                                <span class="text-xs text-slate-600">Yellow Cards</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:text="${player != null && player.playerStatDto != null && player.playerStatDto.yellowCards != null ? player.playerStatDto.yellowCards : '0'}">0</span>
                        </div>
                        <div class="bg-white rounded-lg p-1 shadow-sm">
                            <div class="flex items-center gap-1 mb-0.5">
                                <i class="icon icon-square text-red-500"></i>
                                <span class="text-xs text-slate-600">Red Cards</span>
                            </div>
                            <span class="text-sm font-bold text-slate-800"
                                  th:text="${player != null && player.playerStatDto != null && player.playerStatDto.redCards != null ? player.playerStatDto.redCards : '0'}">0</span>
                        </div>
                    </div>
                </div>

                <!-- Position Map -->
                <div class="bg-slate-50 rounded-xl p-2" th:if="${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.position != null}">
                    <h3 class="font-semibold mb-1 flex items-center gap-1 text-sm text-slate-800">
                        <i class="icon icon-layout text-emerald-500"></i>
                        Position
                    </h3>
                    <div class="flex justify-center items-center">
                        <div class="position-map">
                            <!-- Field markings - very subtle -->
                            <div class="field-line" style="width: 100%; height: 1px; top: 50%; left: 0;"></div>
                            <div class="field-line" style="width: 1px; height: 100%; left: 50%; top: 0;"></div>

                            <!-- Position indicators - all on the left side -->
                            <!-- Striker -->
                            <div th:if="${player.fmPlayerDetailsDto.position.striker > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.striker < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.striker < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 10%;">
                            </div>

                            <!-- Attacking Midfielders -->
                            <div th:if="${player.fmPlayerDetailsDto.position.attackingMidLeft > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.attackingMidLeft < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.attackingMidLeft < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 20%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.attackingMidCentral > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.attackingMidCentral < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.attackingMidCentral < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 25%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.attackingMidRight > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.attackingMidRight < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.attackingMidRight < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 30%;">
                            </div>

                            <!-- Midfielders -->
                            <div th:if="${player.fmPlayerDetailsDto.position.midfielderLeft > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.midfielderLeft < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.midfielderLeft < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 35%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.midfielderCentral > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.midfielderCentral < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.midfielderCentral < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 40%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.midfielderRight > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.midfielderRight < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.midfielderRight < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 45%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.defensiveMidfielder > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.defensiveMidfielder < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.defensiveMidfielder < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 50%;">
                            </div>

                            <!-- Wing Backs -->
                            <div th:if="${player.fmPlayerDetailsDto.position.wingBackLeft > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.wingBackLeft < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.wingBackLeft < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 55%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.wingBackRight > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.wingBackRight < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.wingBackRight < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 60%;">
                            </div>

                            <!-- Defenders -->
                            <div th:if="${player.fmPlayerDetailsDto.position.defenderLeft > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.defenderLeft < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.defenderLeft < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 65%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.defenderCentral > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.defenderCentral < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.defenderCentral < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 70%;">
                            </div>

                            <div th:if="${player.fmPlayerDetailsDto.position.defenderRight > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.defenderRight < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.defenderRight < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 75%;">
                            </div>

                            <!-- Goalkeeper -->
                            <div th:if="${player.fmPlayerDetailsDto.position.goalkeeper > 0}"
                                 th:class="${'position-indicator ' +
                                  (player.fmPlayerDetailsDto.position.goalkeeper < 10 ? 'position-gray' :
                                   player.fmPlayerDetailsDto.position.goalkeeper < 15 ? 'position-yellow' : 'position-green')}"
                                 style="top: 85%;">
                            </div>
                        </div>
                    </div>
                    <div class="mt-2 text-center text-xs text-slate-500">
                        <span class="inline-block px-1 mx-1"><span class="inline-block w-2 h-2 bg-gray-500 rounded-sm mr-1"></span> &lt;10</span>
                        <span class="inline-block px-1 mx-1"><span class="inline-block w-2 h-2 bg-yellow-400 rounded-sm mr-1"></span> 10-14</span>
                        <span class="inline-block px-1 mx-1"><span class="inline-block w-2 h-2 bg-green-400 rounded-sm mr-1"></span> 15-20</span>
                    </div>
                </div>
            </div>

            <!-- Attributes Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <!-- Technical Attributes -->
                <div class="bg-slate-50 rounded-xl p-2">
                    <h3 class="font-semibold mb-1 flex items-center gap-1 text-sm text-slate-800">
                        <i class="icon icon-zap text-emerald-500"></i>
                        Technical
                    </h3>
                    <div class="space-y-0.5">
                        <div th:replace=":: attribute('Corners', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.corners : null})"></div>
                        <div th:replace=":: attribute('Crossing', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.crossing : null})"></div>
                        <div th:replace=":: attribute('Dribbling', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.dribbling : null})"></div>
                        <div th:replace=":: attribute('Finishing', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.finishing : null})"></div>
                        <div th:replace=":: attribute('First Touch', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.firstTouch : null})"></div>
                        <div th:replace=":: attribute('Free Kick Taking', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.freeKicks : null})"></div>
                        <div th:replace=":: attribute('Heading', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.heading : null})"></div>
                        <div th:replace=":: attribute('Long Shots', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.longShots : null})"></div>
                        <div th:replace=":: attribute('Long Throws', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.longThrows : null})"></div>
                        <div th:replace=":: attribute('Marking', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.marking : null})"></div>
                        <div th:replace=":: attribute('Passing', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.passing : null})"></div>
                        <div th:replace=":: attribute('Penalty Taking', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.penaltyTaking : null})"></div>
                        <div th:replace=":: attribute('Tackling', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.tackling : null})"></div>
                        <div th:replace=":: attribute('Technique', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.technicalAttributes != null ? player.fmPlayerDetailsDto.technicalAttributes.technique : null})"></div>
                    </div>
                </div>

                <!-- Mental Attributes -->
                <div class="bg-slate-50 rounded-xl p-2">
                    <h3 class="font-semibold mb-1 flex items-center gap-1 text-sm text-slate-800">
                        <i class="icon icon-brain text-emerald-500"></i>
                        Mental
                    </h3>
                    <div class="space-y-0.5">
                        <div th:replace=":: attribute('Aggression', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.aggression : null})"></div>
                        <div th:replace=":: attribute('Anticipation', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.anticipation : null})"></div>
                        <div th:replace=":: attribute('Bravery', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.bravery : null})"></div>
                        <div th:replace=":: attribute('Composure', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.composure : null})"></div>
                        <div th:replace=":: attribute('Concentration', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.concentration : null})"></div>
                        <div th:replace=":: attribute('Decisions', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.decisions : null})"></div>
                        <div th:replace=":: attribute('Determination', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.determination : null})"></div>
                        <div th:replace=":: attribute('Flair', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.flair : null})"></div>
                        <div th:replace=":: attribute('Leadership', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.leadership : null})"></div>
                        <div th:replace=":: attribute('Off The Ball', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.offTheBall : null})"></div>
                        <div th:replace=":: attribute('Positioning', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.positioning : null})"></div>
                        <div th:replace=":: attribute('Teamwork', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.teamwork : null})"></div>
                        <div th:replace=":: attribute('Vision', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.vision : null})"></div>
                        <div th:replace=":: attribute('Work Rate', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.mentalAttributes != null ? player.fmPlayerDetailsDto.mentalAttributes.workRate : null})"></div>
                    </div>
                </div>

                <!-- Physical Attributes -->
                <div class="bg-slate-50 rounded-xl p-2">
                    <h3 class="font-semibold mb-1 flex items-center gap-1 text-sm text-slate-800">
                        <i class="icon icon-dumbbell text-emerald-500"></i>
                        Physical
                    </h3>
                    <div class="space-y-0.5">
                        <div th:replace=":: attribute('Acceleration', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.acceleration : null})"></div>
                        <div th:replace=":: attribute('Agility', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.agility : null})"></div>
                        <div th:replace=":: attribute('Balance', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.balance : null})"></div>
                        <div th:replace=":: attribute('Jumping Reach', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.jumpingReach : null})"></div>
                        <div th:replace=":: attribute('Natural Fitness', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.naturalFitness : null})"></div>
                        <div th:replace=":: attribute('Pace', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.pace : null})"></div>
                        <div th:replace=":: attribute('Stamina', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.stamina : null})"></div>
                        <div th:replace=":: attribute('Strength', ${player != null && player.fmPlayerDetailsDto != null && player.fmPlayerDetailsDto.physicalAttributes != null ? player.fmPlayerDetailsDto.physicalAttributes.strength : null})"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="bg-slate-800 text-white py-3 text-xs">
    <div class="w-full max-w-7xl mx-auto px-2">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            <div>
                <h3 class="text-sm font-semibold mb-1">About FMRS</h3>
                <p class="text-slate-400 text-xs">Comprehensive, up-to-date information about professional soccer players, teams, and leagues worldwide.</p>
            </div>
            <div>
                <h3 class="text-sm font-semibold mb-1">Quick Links</h3>
                <ul class="space-y-0.5">
                    <li><a href="/about" class="text-slate-400 hover:text-white transition duration-300">About</a></li>
                    <li><a href="/contact" class="text-slate-400 hover:text-white transition duration-300">Contact</a></li>
                    <li><a href="/privacy" class="text-slate-400 hover:text-white transition duration-300">Privacy Policy</a></li>
                    <li><a href="/terms" class="text-slate-400 hover:text-white transition duration-300">Terms of Service</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-sm font-semibold mb-1">Connect With Us</h3>
                <div class="flex space-x-2">
                    <a href="#" class="text-slate-400 hover:text-white transition duration-300"><i class="icon icon-twitter"></i></a>
                    <a href="#" class="text-slate-400 hover:text-white transition duration-300"><i class="icon icon-facebook"></i></a>
                    <a href="#" class="text-slate-400 hover:text-white transition duration-300"><i class="icon icon-instagram"></i></a>
                    <a href="#" class="text-slate-400 hover:text-white transition duration-300"><i class="icon icon-linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="mt-3 pt-3 border-t border-slate-700 text-center">
            <p class="text-slate-400 text-xs">&copy; 2023 FMRS. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Attribute Template -->
<div th:fragment="attribute(name, value)" class="stat-item flex justify-between items-center px-1 py-0.5 rounded-lg text-xs transition-all duration-200">
    <span th:text="${name}" class="text-slate-700">Attribute</span>
    <div class="flex items-center gap-1">
        <span class="font-semibold w-4 text-right text-slate-800" th:text="${value ?: '0'}">0</span>
        <div class="w-12 stat-bar">
            <div th:with="safeValue=${value ?: 0}"
                 th:class="${
                     safeValue <= 5 ? 'stat-bar-fill-gray h-full' :
                     safeValue <= 10 ? 'stat-bar-fill-yellow h-full' :
                     safeValue <= 15 ? 'stat-bar-fill-orange h-full' :
                     'stat-bar-fill-emerald h-full'
                  }"
                 th:style="'width: ' + ${(value ?: 0) * 5} + '%'"></div>
        </div>
    </div>
</div>
</body>
</html>
